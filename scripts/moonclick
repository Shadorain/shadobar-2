#!/bin/sh

# # Shows the current moon phase.
moonfile="$HOME/.local/share/moonphase"

[ "$(stat -c %y "$moonfile" 2>/dev/null | cut -d' ' -f1)" = "$(date '+%Y-%m-%d')" ] ||
	{ curl -sf "wttr.in/?format=%m" > "$moonfile" || exit 1 ;}
icon="$(cat "$moonfile")"

case "$icon" in
	ğŸŒ‘) notify-send --category="Moon Phases" --icon="ï††" 'î' 'New Moon';;
	ğŸŒ’) notify-send --category="Moon Phases" --icon="ï††" 'î' 'Waxing Crescent' ;;
	ğŸŒ“) notify-send --category="Moon Phases" --icon="ï††" 'î”' 'First Quarter' ;;
	ğŸŒ”) notify-send --category="Moon Phases" --icon="ï††" 'î™' 'Waxing Gibbous' ;;
	ğŸŒ•) notify-send --category="Moon Phases" --icon="ï††" 'î›' 'Full Moon' ;;
	ğŸŒ–) notify-send --category="Moon Phases" --icon="ï††" 'î' 'Waning Gibbous' ;;
	ğŸŒ—) notify-send --category="Moon Phases" --icon="ï††" 'î¢' 'Last Quarter' ;;
	ğŸŒ˜) notify-send --category="Moon Phases" --icon="ï††" 'î¦' 'Waning Crescent' ;;
	*) exit 1 ;;
esac
